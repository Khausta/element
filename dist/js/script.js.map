{"version":3,"sources":["script.js"],"names":["Tab","_createClass","selector","options","_classCallCheck","this","Object","assign","isChanged","concat","defaultOptions","tabs","querySelector","tabsButtons","querySelectorAll","tabsPanels","init","console","events","document","key","value","length","error","tabsList","setAttribute","forEach","el","i","_this","classList","remove","id","add","removeAttribute","addEventListener","e","currentTab","_this2","currentTarget","indexOf","call","direction","prototype","which","index","focus","newTab","switchTabs","oldIndex","oldTab","arguments","Array","tab1","totalStep","rightPanelHeight","offsetTop","rightPanel","style","height"],"mappings":"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","file":"script.js","sourcesContent":["class Tab {\r\n    constructor(selector, options) {\r\n        let defaultOptions = {\r\n            isChanged: () => {\r\n\r\n            }\r\n        }\r\n        this.options = Object.assign(defaultOptions, options); //совмезщение, перезапись\r\n        this.selector = selector;\r\n        this.tabs = document.querySelector(`[data-tabs=\"${selector}\"]`); //нахождение табов\r\n        if(this.tabs) {\r\n            this.tabsList = this.tabs.querySelector('.tabs__nav');\r\n            this.tabsButtons = this.tabs.querySelectorAll('.tabs__nav-btn');\r\n            this.tabsPanels = this.tabs.querySelectorAll('.tabs__panel');\r\n\r\n        } else {\r\n            console.error(`Нет элемента со свойством data-tabs=${selector}`);\r\n            return;\r\n        }\r\n\r\n        this.check();\r\n        this.init();\r\n        this.events();\r\n    }\r\n\r\n    check() {\r\n        if (document.querySelectorAll(`[data-tabs=\"${this.selector}]`).length > 1) {\r\n            console.error('Количество элементов с одинакомым data-tabs больше одного');\r\n            return;\r\n        }\r\n\r\n        if (this.tabsButtons.length !== this.tabsPanels.length) {\r\n            console.error('Количество табов и панелей не совпадает');\r\n            return;\r\n        }\r\n     }\r\n\r\n    init() {\r\n        this.tabsList.setAttribute('role', 'tablist');\r\n\r\n        this.tabsButtons.forEach((el, i) => {\r\n            el.setAttribute('role', 'tab');\r\n            el.setAttribute('tabindex', '-1');\r\n            el.setAttribute('id', `${this.selector}${i + 1}`); //чтобы не пересекались id\r\n            el.classList.remove('tabs__nav-btn_active');\r\n        });\r\n        this.tabsPanels.forEach((el, i) => {\r\n            el.setAttribute('role', 'tabpanel');\r\n            el.setAttribute('tabindex', '-1');\r\n            //aria-labeledBy\r\n            el.setAttribute('aria-labelledby', this.tabsButtons[i].id);\r\n            el.classList.remove('tabs__panel_active');\r\n        });\r\n\r\n        this.tabsButtons[0].classList.add('tabs__nav-btn_active');\r\n        this.tabsButtons[0].removeAttribute('tabindex');\r\n        this.tabsButtons[0].setAttribute('aria-selected', 'true');\r\n        this.tabsPanels[0].classList.add('tabs__panel_active');\r\n        \r\n    }\r\n\r\n    events() {\r\n        this.tabsButtons.forEach((el, i) => {\r\n            el.addEventListener('click', e => {\r\n                let currentTab = this.tabsList.querySelector('[aria-selected]');\r\n                if (e.currentTarget !== currentTab) {\r\n                    this.switchTabs(e.currentTarget, currentTab);\r\n                }\r\n            });\r\n\r\n            el.addEventListener('keydown', e => {\r\n                let index = Array.prototype.indexOf.call(this.tabsButtons, e.currentTarget);\r\n\r\n                let direction = null;\r\n\r\n                if (e.which === 37) {\r\n                    direction = index - 1;\r\n                } else if (e.which === 39) {\r\n                    direction = index + 1;\r\n                } else if (e.which === 40) {\r\n                    direction = 'down';\r\n                } else {\r\n                    direction = null;\r\n                }\r\n\r\n                if (direction !== null) {\r\n                    if (direction === 'down') {\r\n                        this.tabsPanels[i].focus();\r\n                    } else if (this.tabsButtons[direction]) {\r\n                        this.switchTabs(this.tabsButtons[direction], e.currentTarget);\r\n                    } else {\r\n                    }\r\n                }\r\n            })\r\n        });\r\n\r\n\r\n    }\r\n\r\n    switchTabs(newTab, oldTab = this.tabs.querySelector('[aria-selected]')) {\r\n        newTab.focus();\r\n        newTab.removeAttribute('tabindex');\r\n        newTab.setAttribute('aria-selected', 'true');\r\n\r\n        oldTab.removeAttribute('aria-selected');\r\n        oldTab.setAttribute('tabindex', '-1');\r\n\r\n        let index = Array.prototype.indexOf.call(this.tabsButtons, newTab);\r\n        let oldIndex = Array.prototype.indexOf.call(this.tabsButtons, oldTab);\r\n        this.tabsPanels[oldIndex].classList.remove('tabs__panel_active');\r\n        this.tabsPanels[index].classList.add('tabs__panel_active');\r\n        this.tabsButtons[oldIndex].classList.remove('tabs__nav-btn_active');\r\n        this.tabsButtons[index].classList.add('tabs__nav-btn_active');\r\n\r\n        this.options.isChanged(this);\r\n    }\r\n}\r\n\r\n\r\nconst tab1 = new Tab('tab', {\r\n    //для примера\r\n    // isChanged: (tabs) => { \r\n    //      console.log(tabs); \r\n    // }\r\n});\r\n\r\n\r\n//добавление фиксированной позиции блоку \"Итого\" в правой панели\r\nconst totalStep = document.querySelector('.total');\r\nconst rightPanelHeight = totalStep.offsetTop - 800;\r\nconst rightPanel = document.querySelector('.order__right');\r\nrightPanel.style.height = rightPanelHeight + 'px';\r\n\r\n"]}